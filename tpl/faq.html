{{$questions := copy .Page .Content "questions"}}

<section id="faq" class="faq">
    <div class="section-content">
        <div class="gradient-container" data-sal="slide-up" data-sal-duration="800">
            <div class="gradient green left"></div>
        </div>
        <h2 data-sal="slide-up">{{html (copy .Page .Content "headline")}}</h2>
        <p data-sal="slide-up" data-sal-delay="100">{{html (copy .Page .Content "text")}}</p>
        <div class="grid">
            {{range $questions}}
                <div class="accordion card cursor-pointer" data-sal="slide-up" data-sal-delay="200">
                    <div class="accordion-headline no-select">
                        <h3>{{html (index . "question")}}</h3>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"><path d="M17 7L7 17m10 0L7 7" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                    </div>
                    <div class="accordion-content">
                        <span class="no-select"><br></span>
                        <p>{{html (index . "answer")}}</p>
                    </div>
                </div>
            {{end}}
        </div>
    </div>
</section>

<script>
    const accordions = document.getElementsByClassName("accordion");

    for (let i = 0; i < accordions.length; i++) {
        accordions[i].addEventListener("click", function() {
            this.classList.toggle("active");
            let content = this.getElementsByTagName("div")[1];

            if (content.style.maxHeight) {
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
            }
        });
    }
</script>