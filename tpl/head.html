{{- $title := pageTitle -}}
{{- if (copy .Page .Page "title") -}}
    {{$title = fmt "%s – %s" (copy .Page .Page "title") pageTitle}}
{{- else if (copy .Page .Content "title") -}}
    {{$title = fmt "%s – %s" (copy .Page .Content "title") pageTitle}}
{{- end -}}
{{- $metaDescription := copy .Page .Content "meta_description" -}}
{{- if (copy .Page .Page "meta_description") -}}
    {{- $metaDescription = (copy .Page .Page "meta_description") -}}
{{- else if (copy .Page .Content "meta_description") -}}
    {{- $metaDescription = (copy .Page .Content "meta_description") -}}
{{- end -}}
{{- $previewImage := fmt "%s/static/img/og-image.png" hostname -}}
{{- if (get .Page "preview_img") -}}
    {{- $previewImage = fmt "%s%s" hostname (get .Page "preview_img") -}}
{{- end -}}
<!DOCTYPE html>
<html lang="{{.Page.Language}}">
<head>
    <base href="/" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="copyright" content="Emvi Software GmbH" />
    <meta name="author" content="Emvi Software GmbH" />
    <meta name="title" content="{{$title}}" />
    <meta name="description" content="{{$metaDescription}}" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@PirschAnalytics" />
    <meta name="twitter:title" content="{{$title}}" />
    <meta name="twitter:description" content="{{$metaDescription}}" />
    <meta name="twitter:image" content="{{$previewImage}}" />
    <meta property="og:url" content="{{hostname}}" />
    <meta property="og:title" content="{{$title}}" />
    <meta property="og:site_name" content="Pirsch Analytics" />
    <meta property="og:description" content="{{$metaDescription}}" />
    <meta property="og:image" content="{{$previewImage}}" />
    {{- if (get .Page "preview_img") -}}
        <meta property="og:type" content="article" />
    {{- end -}}
    <meta name="msapplication-TileColor" content="#f8f5ed" />
    <meta name="theme-color" content="#f8f5ed" />
    {{- if (get .Content "no_index") -}}
        <meta name="robots" content="noindex, nofollow" />
    {{- end -}}

    <link rel="stylesheet" type="text/css" href="static/css/main.css" />
    <link rel="stylesheet" type="text/css" href="static/css/scroll.css" />
    <link rel="mask-icon" href="static/img/favicon/safari-pinned-tab.svg" color="#0a0a0a" />
    <link rel="apple-touch-icon" sizes="180x180" href="static/img/favicon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="static/img/favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="static/img/favicon/favicon-16x16.png" />
    <link rel="manifest" href="static/img/favicon/site.webmanifest" />
    <link rel="canonical" href="{{.Page.CanonicalLink}}" />

    {{range $language, $path := .Page.Path}}
        <link rel="alternate" hreflang="{{if eq $language "en"}}x-default{{else}}{{$language}}{{end}}" href="{{fmt "%s%s" hostname $path}}" />
    {{end}}
    
    <title>{{$title}}</title>

    <script src="/static/js/main.js"></script>
    <script src="/static/js/scroll.js"></script>

    {{- if (get .Content "hcaptcha") -}}
        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
    {{- end -}}
</head>
<body>
